<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Jesta Tech Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #2563eb; --success: #10b981; --warning: #f59e0b; --danger: #ef4444; --light-bg: #f3f4f6; --sidebar-bg: #4169E1; --hover-bg: #1e40af; --text-light: #ffffff; --text-dark: #1f2937; --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        html { height: 100%; }
        body { font-family: var(--font-family); background: var(--light-bg); height: 100%; }
        .sidebar { position: fixed; left: 0; top: 0; height: 100vh; width: 260px; background: var(--sidebar-bg); padding: 20px 0; transition: 0.3s; z-index: 100; display: flex; flex-direction: column; }
        .sidebar-header { display: flex; align-items: center; justify-content: space-between; padding: 0 20px 25px 20px; border-bottom: 1px solid rgba(255,255,255,0.1); flex-shrink: 0; }
        .logo { display: flex; align-items: center; gap: 12px; color: var(--text-light); font-size: 1.3rem; font-weight: 700; font-family: var(--font-family); white-space: nowrap; }
        .logo i { font-size: 1.5rem; color: var(--primary); display: flex; align-items: center; justify-content: center; }
        .toggle-btn { background: none; border: none; color: var(--text-light); font-size: 1.2rem; cursor: pointer; padding: 8px; border-radius: 6px; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; }
        .toggle-btn:hover { background: rgba(255,255,255,0.1); transform: scale(1.05); }
        .toggle-btn i { font-size: 1.2rem; }
        .nav-menu { list-style: none; padding: 15px 0; flex: 1; display: flex; flex-direction: column; gap: 8px; }
        .nav-link { display: flex; align-items: center; gap: 15px; padding: 14px 20px; color: rgba(255,255,255,0.7); text-decoration: none; transition: 0.3s; font-size: 0.95rem; font-family: var(--font-family); margin: 0 10px; border-radius: 6px; font-weight: 500; }
        .nav-link:hover { background: var(--hover-bg); color: var(--text-light); }
        .nav-link.active { background: var(--hover-bg); color: var(--text-light); border-left: 4px solid var(--primary); padding-left: 16px; }
        .nav-link i { font-size: 1.1rem; width: 20px; text-align: center; display: flex; align-items: center; justify-content: center; }
        .main-content { margin-left: 260px; transition: 0.3s; min-height: 100vh; display: flex; flex-direction: column; }
        .top-bar { background: white; padding: 20px 30px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 50; flex-shrink: 0; gap: 20px; }
        .user-profile { display: flex; align-items: center; gap: 12px; cursor: pointer; position: relative; }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; }
        .user-info h4 { font-size: 0.9rem; margin-bottom: 2px; }
        .user-info p { font-size: 0.75rem; color: #6b7280; }
        .profile-dropdown { position: absolute; top: 100%; right: 0; margin-top: 10px; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); min-width: 200px; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s ease; z-index: 1000; }
        .profile-dropdown.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .profile-dropdown::before { content: ''; position: absolute; top: -6px; right: 20px; width: 12px; height: 12px; background: white; transform: rotate(45deg); box-shadow: -2px -2px 4px rgba(0,0,0,0.05); }
        .dropdown-header { padding: 15px; border-bottom: 1px solid #e5e7eb; }
        .dropdown-header h4 { font-size: 0.95rem; margin-bottom: 3px; }
        .dropdown-header p { font-size: 0.8rem; color: #6b7280; }
        .dropdown-menu { list-style: none; padding: 8px 0; }
        .dropdown-menu li { padding: 0; }
        .dropdown-menu button { display: flex; align-items: center; gap: 12px; width: 100%; padding: 12px 15px; text-decoration: none; color: #1f2937; border: none; background: none; cursor: pointer; font-size: 0.9rem; transition: background 0.2s ease; text-align: left; }
        .dropdown-menu button:hover { background: #f3f4f6; }
        .dropdown-menu i { width: 18px; font-size: 1rem; color: #6b7280; }
        .dropdown-menu .logout-btn { color: #ef4444; }
        .dropdown-menu .logout-btn i { color: #ef4444; }
        .content { padding: 30px; }
        .page-header h1 { font-size: 1.8rem; margin-bottom: 5px; }
        .breadcrumb { color: #6b7280; font-size: 0.9rem; margin-bottom: 30px; }
        .analytics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .stat-card h3 { font-size: 2.2rem; margin-bottom: 5px; color: var(--primary); }
        .stat-card p { color: #6b7280; }
        .stat-card .change { margin-top: 10px; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }
        .change.up { color: var(--success); }
        .change.down { color: var(--danger); }
        .chart-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px; }
        .chart-header { display: flex; justify-content: space-between; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #e5e7eb; }
        .chart-header h2 { font-size: 1.3rem; }
        .chart-placeholder { height: 300px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; }
        .performance-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .performance-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .performance-card h3 { margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .performance-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb; }
        .performance-item:last-child { border-bottom: none; }
        .performance-label { font-size: 0.95rem; color: #374151; }
        .performance-value { font-weight: 600; color: var(--primary); }
        .progress-bar-mini { height: 6px; background: #e5e7eb; border-radius: 10px; margin-top: 8px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); border-radius: 10px; }
        select { padding: 8px 15px; border: 1px solid #e5e7eb; border-radius: 8px; outline: none; }
    </style>

    <!-- Modern Header CSS -->
    <link rel="stylesheet" href="/css/admin-header-modern.css">

    <!-- Mobile Navigation CSS -->
    <link rel="stylesheet" href="/css/admin-mobile-nav.css">
</head>
<body>
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div class="logo"><span>Jesta Tech Solutions</span></div>
        <button class="toggle-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
    </div>
    <ul class="nav-menu">
        <li><a href="/admin/dashboard" class="nav-link"><i class="fas fa-home"></i><span>Dashboard</span></a></li>
        <li><a href="/admin/forms" class="nav-link"><i class="fas fa-list-check"></i><span>Forms</span></a></li>
        <li><a href="/admin/projects" class="nav-link"><i class="fas fa-project-diagram"></i><span>Projects</span></a></li>
        <li><a href="/admin/tasks" class="nav-link"><i class="fas fa-tasks"></i><span>Tasks</span></a></li>
        <li><a href="/admin/analytics" class="nav-link active"><i class="fas fa-chart-line"></i><span>Analytics</span></a></li>
        <li><a href="/admin/billing" class="nav-link"><i class="fas fa-file-invoice-dollar"></i><span>Billing</span></a></li>
        <li><a href="/admin/users" class="nav-link"><i class="fas fa-users"></i><span>Users</span></a></li>
    </ul>
</aside>

<main class="main-content" id="mainContent">
    <div class="top-bar">
        <h2>Analytics Dashboard</h2>
        <div style="display: flex; align-items: center; gap: 25px;">
            <i class="fas fa-bell" style="font-size: 1.3rem; color: #1f2937; cursor: pointer;" title="Notifications"></i>
            <i class="fas fa-cog" onclick="window.location.href='/admin/settings'" style="font-size: 1.3rem; color: #1f2937; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.color='#2563eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.color='#1f2937'; this.style.transform='rotate(0deg)'" title="Settings"></i>
            <div class="user-profile" id="userProfileBtn">
                <div class="user-avatar" id="userAvatar">AD</div>
                <div class="user-info">
                    <h4 id="userName">Admin User</h4>
                    <p id="userRole">Administrator</p>
                </div>
                <i class="fas fa-chevron-down"></i>
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="dropdown-header">
                        <h4 id="dropdownUserName">Admin User</h4>
                        <p id="dropdownUserEmail">admin@admin.com</p>
                    </div>
                    <ul class="dropdown-menu">
                        <li>
                            <button onclick="handleLogout()" class="logout-btn">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="content">
        <div class="page-header">
            <h1>Business Analytics</h1>
            <p class="breadcrumb">Home / Analytics</p>
        </div>

        <div class="analytics-grid">
            <div class="stat-card">
                <h3 id="totalRevenue">₹0</h3>
                <p>Total Revenue</p>
                <div class="change up" id="revenueChange"><i class="fas fa-arrow-up"></i><span>—</span></div>
            </div>
            <div class="stat-card">
                <h3 id="totalUsers">0</h3>
                <p>Total Users</p>
                <div class="change up" id="usersChange"><i class="fas fa-arrow-up"></i><span>—</span></div>
            </div>
            <div class="stat-card">
                <h3 id="activeProjects">0</h3>
                <p>Active Projects</p>
                <div class="change up" id="projectsChange"><i class="fas fa-arrow-up"></i><span>—</span></div>
            </div>
            <div class="stat-card">
                <h3 id="successRate">0%</h3>
                <p>Success Rate</p>
                <div class="change down" id="successChange"><i class="fas fa-arrow-down"></i><span>—</span></div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-header">
                <h2>Revenue Trends</h2>
                <select id="revenuePeriod"><option value="30">Last 30 Days</option><option value="90">Last 3 Months</option><option value="365">Last Year</option></select>
            </div>
            <div style="height: 300px; padding: 20px;">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-header">
                <h2>Project Status Distribution</h2>
                <select id="statusPeriod"><option value="all">All Time</option><option value="month">This Month</option><option value="quarter">This Quarter</option></select>
            </div>
            <div style="height: 300px; padding: 20px;">
                <canvas id="projectStatusChart"></canvas>
            </div>
        </div>

        <div class="performance-grid">
            <div class="performance-card">
                <h3><i class="fas fa-star" style="color: var(--warning);"></i>Top Performing Projects</h3>
                <div id="topProjectsList"></div>
            </div>

            <div class="performance-card">
                <h3><i class="fas fa-users" style="color: var(--primary);"></i>Team Performance</h3>
                <div id="teamPerformanceList"></div>
            </div>

            <div class="performance-card">
                <h3><i class="fas fa-rupee-sign" style="color: var(--success);"></i>Financial Metrics</h3>
                <div id="financialMetricsList"></div>
            </div>
        </div>
    </div>
</main>

<!-- Mobile Bottom Navigation -->
<nav class="bottom-nav">
    <ul class="bottom-nav-menu">
        <li class="bottom-nav-item">
            <a href="/admin/dashboard" class="bottom-nav-link">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
        </li>
        <li class="bottom-nav-item">
            <a href="/admin/projects" class="bottom-nav-link">
                <i class="fas fa-project-diagram"></i>
                <span>Projects</span>
            </a>
        </li>
        <li class="bottom-nav-item">
            <a href="/admin/tasks" class="bottom-nav-link">
                <i class="fas fa-tasks"></i>
                <span>Tasks</span>
            </a>
        </li>
        <li class="bottom-nav-item">
            <a href="/admin/analytics" class="bottom-nav-link active">
                <i class="fas fa-chart-line"></i>
                <span>Analytics</span>
            </a>
        </li>
        <li class="bottom-nav-item">
            <a href="/admin/billing" class="bottom-nav-link">
                <i class="fas fa-file-invoice-dollar"></i>
                <span>Billing</span>
            </a>
        </li>
        <li class="bottom-nav-item">
            <a href="/admin/users" class="bottom-nav-link">
                <i class="fas fa-users"></i>
                <span>Users</span>
            </a>
        </li>
    </ul>
</nav>

<!-- Mobile Navigation JavaScript -->
<script src="/js/admin-mobile-nav.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="/js/admin-common.js"></script>
<script src="/js/admin-analytics.js"></script>
</body>
</html>
